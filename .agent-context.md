# Claude-Discord Agent-Context

> **MANDATORY READ**: Agents MUST read this file (and any `.agent-context.md` in subdirectories) before interacting with the codebase. This is a compressed source of truth to minimize context token usage while maximizing performance.

## üéØ Project Mission

A highly modular, hierarchical agent system that bridges Discord with a powerful "Manager-Subagent" framework (Antigravity). It uses `gemini-2.0-flash` for orchestration and specialized subagents for execution.

## üèóÔ∏è Compartment Map (Core Tree)

- `/agent/`: **The Brain**. Contains the Manager logic, Session management, and the "Kernel" for subagent spawning.
- `/discord/`: **The Interface**. Discord bot commands, event handlers, and UI (embeds/components).
- `/claude/`: **The Engine**. API clients (even though it's called claude, it uses Gemini) and model interaction logic.
- `/git/`: **The Hand**. Git operations, repository state management.
- `/server/` & `/dashboard/`: **The View**. Hono server and frontend UI for bot monitoring/config.
- `/settings/`: **The Memory**. Persistent configuration and state.

## üìú Global Conventions

- **Language**: TypeScript (Deno runtime).
- **Style**: Functional where possible, but use Classes for State (e.g., `AgentSession`).
- **File Naming**: `kebab-case` for general files, `PascalCase` for classes.
- **Agent Communication**: Use structured JSON for inter-agent delegation.
- **Dynamic Spawning**: The `AgentRegistry` allows registering specialized subagents at runtime.

## ‚öñÔ∏è Rules of Engagement

1. **Context Hierarchy**: Always check the local `.agent-context.md` when entering a new directory.
2. **Minimalism**: Write concise, high-impact code. Avoid bloat.
3. **Safety**: Never execute destructive commands without verifying the `Cwd` and intent.

## üõ†Ô∏è Tooling

- `deno run -A ...`: Standard execution.
- `agy`: Antigravity CLI (internal use).
- **Bot Manager MCP**: High-level bot orchestration via stdio server (`util/mcp-server.ts`).
